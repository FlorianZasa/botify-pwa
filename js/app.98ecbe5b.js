(function(){"use strict";var t={6471:function(t,e,a){var r=a(9242),o=a(3396);const s={id:"nav"},n=(0,o._)("i",{class:"bi bi-house-door-fill"},null,-1),i=(0,o._)("i",{class:"bi bi-plus-square-fill"},null,-1);function l(t,e,a,r,l,c){const d=(0,o.up)("router-link"),u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",s,[(0,o.Wm)(d,{to:"/",class:"router-link"},{default:(0,o.w5)((()=>[n,(0,o.Uk)(" Home")])),_:1}),(0,o.Uk)(" | "),(0,o.Wm)(d,{to:"/bot/add",class:"router-link"},{default:(0,o.w5)((()=>[i,(0,o.Uk)(" Hinzufügen")])),_:1})]),(0,o.Wm)(u)],64)}var c={name:"App",metaInfo:{title:"Botify"}},d=a(89);const u=(0,d.Z)(c,[["render",l]]);var h=u,p=a(5431);(0,p.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var b=a(2483);const m=t=>((0,o.dD)("data-v-7cd74c62"),t=t(),(0,o.Cn)(),t),v={class:"container home-wrapper"},_={class:"home-header"},f=m((()=>(0,o._)("h2",{class:"page-title"},"Bot Übersicht:",-1))),g={key:0},w=m((()=>(0,o._)("i",{class:"bi bi-caret-up-fill"},null,-1))),D=m((()=>(0,o._)("div",{class:"input-group mb-3 home-filter"},[(0,o._)("input",{type:"text",class:"form-control",id:"botId",placeholder:"FZ***"}),(0,o._)("button",{class:"btn btn-outline-secondary",type:"button"},"Filter")],-1))),y={key:1},k=m((()=>(0,o._)("i",{class:"bi bi-caret-down-fill"},null,-1))),C={class:"home-content"};function S(t,e,a,r,s,n){const i=(0,o.up)("BotCard");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("div",_,[f,s.showFilter?((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",{class:"toggle-filter-btn",onClick:e[0]||(e[0]=t=>n.toggleFilter())},[w,(0,o.Uk)(" Filter ")]),D])):((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("div",{class:"toggle-filter-btn",onClick:e[1]||(e[1]=t=>n.toggleFilter())},[k,(0,o.Uk)(" Filter ")])]))]),(0,o._)("div",C,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.botData,(t=>((0,o.wg)(),(0,o.j4)(i,{key:t.id,data:t},null,8,["data"])))),128))])])}a(7658);var B=a(7139);const F={class:"name"},T={class:"last_state"},z={class:"status"};function O(t,e,a,r,s,n){const i=(0,o.up)("Countdown");return(0,o.wg)(),(0,o.iD)("div",{id:"card",class:(0,B.C_)(n.is_active(s.componentData.last_state)),onClick:e[0]||(e[0]=t=>n.open_details(s.componentData.name))},[(0,o._)("div",F,(0,B.zw)(s.componentData.id)+" / "+(0,B.zw)(s.componentData.name),1),(0,o._)("div",T,(0,B.zw)(s.componentData.last_state),1),(0,o._)("div",z,(0,B.zw)(s.componentData.status),1),(0,o.Wm)(i,{startTime:n.get_seconds(s.componentData.last_state),active:n.is_active(s.componentData.last_state)},null,8,["startTime","active"])],2)}function x(t,e,a,r,s,n){return(0,o.wg)(),(0,o.iD)("div",{id:"circle",class:(0,B.C_)("inactive"==a.active?"inactive":"active")}," VOR "+(0,B.zw)(this.timer)+" SEK ",3)}var I={name:"Countdown",data(){return{timer:this.startTime}},props:{startTime:Number,active:String},methods:{countDownTimer(){setTimeout((()=>{this.timer+=1,this.countDownTimer(),this.triggerReload()}),1e3)},triggerReload(){90==this.timer&&this.$parent.reload()}},created(){this.countDownTimer()}};const M=(0,d.Z)(I,[["render",x],["__scopeId","data-v-013892ac"]]);var A=M,Z={name:"HelloWorld",components:{Countdown:A},props:{data:{type:Object}},data(){return{componentData:this.data}},methods:{get_seconds(t){try{var e=new Date;const h=t.split(","),p=h[0].split(".");var a=p[0].trim(),r=p[1].trim(),o=p[2].trim();const b=h[1].split(":");var s=b[0].trim(),n=b[1].trim(),i=b[2].trim(),l=new Date(o,parseInt(r)-1,a,s,n,i,0),c=l.getTime()-e.getTime(),d=c/1e3,u=Math.abs(Math.round(d));return u}catch{return 0}},is_active(t){var e=t,a=this.get_seconds(e);return a>90?"inactive":"active"},open_details(t){this.$router.push({name:"BotView",params:{name:t}})},reload(){this.$parent.readBots()}}};const N=(0,d.Z)(Z,[["render",O],["__scopeId","data-v-2b186cba"]]);var j=N,E=a(1509);a(5274),a(9476);const U={apiKey:"AIzaSyANxIKzjNVJ-sZKYZ6VxLpMifuZ4tpA6Xw",authDomain:"robat-1c1a8.firebaseapp.com",databaseURL:"https://robat-1c1a8.firebaseio.com",projectId:"robat-1c1a8",storageBucket:"robat-1c1a8.appspot.com",messagingSenderId:"343068274490",appId:"1:343068274490:web:3756bfea112481a587ea03",measurementId:"G-R065CS48NG"};E.Z.initializeApp(U);var V=E.Z.firestore();const H=V.collection("bots");var L={data(){return{showFilter:!1,botData:[]}},name:"Home",components:{BotCard:j},methods:{remove_all_bots(){const t=document.querySelectorAll("#card");t.forEach((t=>{t.remove()}))},readBots(){this.botData=[],H.onSnapshot((t=>(this.remove_all_bots(),t.forEach((t=>{this.botData.push(t.data())})),this.botData.sort(),this.botData.reverse())))},toggleFilter(){0==this.showFilter?this.showFilter=!0:this.showFilter=!1}},beforeMount(){this.readBots()}};const W=(0,d.Z)(L,[["render",S],["__scopeId","data-v-7cd74c62"]]);var K=W;const R=t=>((0,o.dD)("data-v-3d5d4bb8"),t=t(),(0,o.Cn)(),t),P={class:"container"},$={class:"botview"},q={class:"botview-header"},G={class:"page-title buttonGrup"},Y={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},J={class:"breadcrumb"},X=R((()=>(0,o._)("li",{class:"breadcrumb-item"},[(0,o._)("a",{href:"#"},"Übersicht")],-1))),Q={class:"breadcrumb-item activated","aria-current":"page"},tt={class:"botview-hdg"},et={class:"page-title"},at={class:"charts"},rt={class:"botview-content"},ot={style:{"border-collapse":"collapse",width:"100%"}},st=R((()=>(0,o._)("td",{class:"header"},"Status:",-1))),nt=R((()=>(0,o._)("td",{class:"header"},"Alle Fehler bisher:",-1))),it={id:"table_content"},lt=R((()=>(0,o._)("td",{class:"header"},"Status:",-1))),ct={id:"table_content state",style:{"padding-left":"6rem"}},dt=R((()=>(0,o._)("td",{class:"header"},"Log:",-1))),ut={id:"table_content"},ht=R((()=>(0,o._)("td",{class:"header"},"Mehr Infos",-1))),pt={id:"table_content"};function bt(t,e,a,r,s,n){const i=(0,o.up)("BotStartLabelVue"),l=(0,o.up)("apexchart"),c=(0,o.up)("BotNeustartsLabelVue");return(0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("div",$,[(0,o._)("div",q,[(0,o._)("div",G,[(0,o._)("nav",Y,[(0,o._)("ol",J,[X,(0,o._)("li",Q,"Botview "+(0,B.zw)(t.$route.params.name),1)])])]),(0,o._)("div",tt,[(0,o._)("h2",et,"Botview "+(0,B.zw)(t.$route.params.name),1),(0,o._)("h3",{class:(0,B.C_)(n.is_active(n.get_seconds(s.botData.last_state)))},(0,B.zw)(s.counter)+" SEK",3)])]),(0,o._)("div",at,[(0,o.Wm)(i,{started:s.botData.started},null,8,["started"]),(0,o.Wm)(l,{width:"380",type:"bar",options:s.lineChartOptions,series:s.series,ref:"linechart",class:"chart"},null,8,["options","series"]),(0,o.Wm)(c,{restarts:s.botData.automated_restarts},null,8,["restarts"])]),(0,o._)("div",rt,[(0,o._)("table",ot,[(0,o._)("tbody",null,[(0,o._)("tr",null,[st,(0,o._)("td",{id:"table_content",class:(0,B.C_)(n.is_active(n.get_seconds(s.botData.last_state)))},(0,B.zw)(s.botData.last_state),3)]),(0,o._)("tr",null,[nt,(0,o._)("td",it,[(0,o.Wm)(l,{width:"300",type:"pie",options:s.pieChartOptions,series:s.errorSeries,ref:"piechart"},null,8,["options","series"])])]),(0,o._)("tr",null,[lt,(0,o._)("td",ct,(0,B.zw)(s.botData.status),1)]),(0,o._)("tr",null,[dt,(0,o._)("td",ut,(0,B.zw)(s.botData.log),1)]),(0,o._)("tr",null,[ht,(0,o._)("td",pt,(0,B.zw)(s.botData.description),1)])])])])])])}const mt={class:"canvas"};function vt(t,e,a,r,s,n){return(0,o.wg)(),(0,o.iD)("div",mt,[(0,o.Uk)(" Gestartet am "),(0,o._)("b",null,(0,B.zw)(this.started),1)])}var _t={props:{started:String}};const ft=(0,d.Z)(_t,[["render",vt],["__scopeId","data-v-e294ba3a"]]);var gt=ft;const wt={class:"canvas"};function Dt(t,e,a,r,s,n){return(0,o.wg)(),(0,o.iD)("div",wt,[(0,o._)("b",null,(0,B.zw)(this.restarts),1),(0,o.Uk)(" Neustarts ")])}var yt={props:{restarts:String}};const kt=(0,d.Z)(yt,[["render",Dt],["__scopeId","data-v-7d48d466"]]);var Ct=kt;const St=V.collection("bots");var Bt={name:"Botview",props:{name:String},components:{BotStartLabelVue:gt,BotNeustartsLabelVue:Ct},data(){return{botData:{},counter:0,startTime:6,pieData:{},errorSeries:[],pieChartOptions:{chart:{width:400,type:"pie"},labels:[],responsive:[{breakpoint:400,options:{chart:{width:400},legend:{position:"bottom"}}}]},series:[{name:"Ausfälle pro Stunde",data:[]}],lineChartOptions:{chart:{type:"area",height:200,zoom:{enabled:!1}},dataLabels:{enabled:!0},title:{text:"Ausfälle von "+this.name,align:"left"},subtitle:{text:"pro Stunde",align:"left"},labels:[],xaxis:{type:"string"},yaxis:{opposite:!0},legend:{horizontalAlign:"left"},colors:["#F96666"]}}},methods:{readBot(){try{St.doc(this.name).onSnapshot((t=>(this.botData=t.data(),this.counter=this.get_seconds(this.botData.last_state),this.add_data_to_line_serie(),this.pieData=this.get_different_errors(this.botData.errors),this.botData)))}catch{return this.botData}},get_error_per_hour(t){let e=0;for(let a=0;a<this.botData.errors.length;a++){let r=this.botData.errors[a].error_time,o=r.substring(0,2);o==t&&(e+=1)}return e},get_now_hour(){return(new Date).getHours()},add_data_to_line_serie(){let t=[],e=[];for(let a=this.startTime;a<=this.get_now_hour();a++)a?(e.includes(a)||e.push(a+" Uhr"),t.push(this.get_error_per_hour(a))):console.log("FEHLER BEI: "+a);this.series[0].data=t,this.lineChartOptions.labels=e,this.lineChartOptions={labels:e}},get_different_errors(t){var e=[];const a={};for(var r=0;r<t.length;r++)e.push(t[r]["error_msg"]);var o=new Set(e);o=Array.from(o),e.forEach((function(t){a[t]=(a[t]||0)+1}));for(var s=0;s<o.length;s++)this.errorSeries.push(a[o[s]]),this.pieChartOptions.labels.push(o[s]);return a},get_seconds(t){try{var e=new Date;const h=t.split(","),p=h[0].split(".");var a=p[0].trim(),r=p[1].trim(),o=p[2].trim();const b=h[1].split(":");var s=b[0].trim(),n=b[1].trim(),i=b[2].trim(),l=new Date(o,parseInt(r)-1,a,s,n,i,0),c=l.getTime()-e.getTime(),d=c/1e3,u=Math.abs(Math.round(d));return u}catch(h){return 0}},is_active(t){return t>90?"inactive":"active"},countDownTimer(){setTimeout((()=>{this.counter+=1,this.countDownTimer()}),1e3)}},created(){this.countDownTimer()},beforeMount(){this.readBot()}};const Ft=(0,d.Z)(Bt,[["render",bt],["__scopeId","data-v-3d5d4bb8"]]);var Tt=Ft;const zt=t=>((0,o.dD)("data-v-d464d7dc"),t=t(),(0,o.Cn)(),t),Ot={class:"container"},xt=zt((()=>(0,o._)("div",{class:"addbot-header"},[(0,o._)("h2",{class:"page-title"},"Füge einen Bot hinzu:")],-1))),It={class:"addbot-content container"},Mt={class:"form text-center"},At=(0,o.uE)('<div class="form-floating mb-4" data-v-d464d7dc><input type="text" class="form-control" id="botName" placeholder="Name" data-v-d464d7dc><label for="botName" class="form-label" data-v-d464d7dc>Name</label></div><div class="form-floating mb-4" data-v-d464d7dc><input type="text" class="form-control" id="botId" placeholder="FZ***" data-v-d464d7dc><label for="botId" class="form-label" data-v-d464d7dc>FZ***</label></div><div class="form-floating mb-4" data-v-d464d7dc><textarea class="form-control textfield" placeholder="Dies ist eine Beschreibung..." id="floatingTextarea" style="height:100px;" data-v-d464d7dc></textarea><label for="floatingTextarea" data-v-d464d7dc>Dies ist eine Beschreibung...</label></div>',3),Zt={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},Nt=zt((()=>(0,o._)("strong",null,"Ups! ",-1)));function jt(t,e,a,r,s,n){return(0,o.wg)(),(0,o.iD)("div",Ot,[xt,(0,o._)("div",It,[(0,o._)("div",Mt,[At,(0,o._)("button",{type:"button",class:"form-button",onClick:e[0]||(e[0]=t=>n.showMessageFunc())},"Speichern")])]),s.showMessage?((0,o.wg)(),(0,o.iD)("div",Zt,[Nt,(0,o.Uk)("Diese Funktion steht noch nicht zur Verfügung! "),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:e[1]||(e[1]=t=>n.hideMessageFunc())})])):(0,o.kq)("",!0)])}var Et={name:"AddBot",components:{},data(){return{showMessage:!1}},methods:{showMessageFunc(){this.showMessage=!0},hideMessageFunc(){this.showMessage=!1}}};const Ut=(0,d.Z)(Et,[["render",jt],["__scopeId","data-v-d464d7dc"]]);var Vt=Ut;const Ht=[{path:"/",name:"Home",component:K},{path:"/bot/:name",name:"BotView",component:Tt,props:!0},{path:"/bot/add",name:"AddBot",component:Vt}],Lt=(0,b.p7)({history:(0,b.PO)("/"),routes:Ht});var Wt=Lt,Kt=a(65),Rt=(0,Kt.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Pt=a(407),$t=a.n(Pt);a(2166);(0,r.ri)(h).use(Rt).use(Wt).use($t()).mount("#app")}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,r,o,s){if(!r){var n=1/0;for(d=0;d<t.length;d++){r=t[d][0],o=t[d][1],s=t[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||n>=s)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(i=!1,s<n&&(n=s));if(i){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(e&&e(r);c<n.length;c++)s=n[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},r=self["webpackChunkbotify_pwa"]=self["webpackChunkbotify_pwa"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(6471)}));r=a.O(r)})();
//# sourceMappingURL=app.98ecbe5b.js.map